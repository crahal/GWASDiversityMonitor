<!DOCTYPE html>
<html>
{% extends base %}
{% block preamble %}
  <head>
    <meta name="viewport" content="width=device-width, height=device-height initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  </head>
<style>
.container-fluid {
    width: 98%;
    height: 100%;
    overflow-y: hidden;
}
* {
  box-sizing: border-box;
}
.column {
  float: left;
  width: 50%;
  padding: 20px;
  height: 100%;
}
.row:after {
  content: "";
  display: table;
  clear: both;
}
@media screen and (max-width: 600px) {
  .column {
    width: 100%;
  }
}
h1 {
    margin: 0.5em 0 0.3em 0;
    color: #2e484c;
    font-family:Arial, Helvetica, sans-serif;
    font-size: 2.2em;
}
h4 {
    margin: 0.5em 0 0.3em 0;
    color: #2e484c;
    font-family:Arial, Helvetica, sans-serif;
    font-size: 1.3em;
}
h5 {
    margin: 1.25em 0 0.3em 0;
    color: #2e484c;
    font-family:Arial, Helvetica, sans-serif;
    font-size: 1.2em;
}
p {
  font-family:Arial, Helvetica, sans-serif;
  text-align: justify;
  text-justify: inter-word;
  font-size: 1.09em;
}
.nav {
  overflow:hidden;
}
.box div.topleft {
	display: block;
	background: url("images/box-bg.png") top left no-repeat white;
	padding: 2.0em 0em 0em 2.0em;
}
.box div.topright {
	display: block;
	background: url("images/box-bg.png") top right no-repeat white;
	padding: 2.0em;
	margin: -2.0em 0 0 2.0em;
}
.box div.bottomleft {
	display: block;
	height: 45px;
	margin-top: -2.0em;
	background: url("images/box-bg.png") bottom left no-repeat white;
}
.box div.bottomright {
	display: block;
	background: url("images/box-bg.png") bottom right no-repeat white;
	height: 45px;
	margin-left: 3.0em;
.card-text { height: 42px; overflow-x: scroll; width: 100%; }
a.list-group-item {
  overflow: hidden;
  display: table;}
a.list-group-item > div {
  display: table-cell;
  vertical-align: middle;
  float:none;}
}
</style>
<body>
  <div class="container-fluid">
    <ul class="nav nav-tabs">
      <li class="active"><a data-toggle="tab" href="#interactivefigures">Interactive Figures</a></li>
      <li><a data-toggle="tab" href="#additionalinfo">Additional Information</a></li>
    </ul>
  </div>
  <div class="tab-content">
    <div id="interactivefigures" class="tab-pane fade in active">
      <div class="container-fluid">
        <div class="row">
          <div class="col-sm-3">
            <h1>GWAS Diversity Monitor</h1>
<p style="font-size:14px;">Last updated: 2019-11-10 06:02:35. Privacy Policy <a href="https://github.com/crahal/gwasdiversitymonitor/blob/master/privacy_policy.md">here</a>.<br>
            Version 0.8.0. Changelog available <a href="https://github.com/crahal/gwasdiversitymonitor/blob/master/changelog.md">here</a>. Download data <a href="https://github.com/crahal/gwasdiversitymonitor/blob/master/gwasdiversitymonitor_app/data/todownload/gwasdiversitymonitor_download.zip">here</a>.<br></p>
            {{ embed(doc.roots[0]) }}
            <div class="container">
              <div class="row">
                <div class="col-sm-4 ">
                  <div class="card text-dark bg-light">
                    <div class="card-header bg-dark text-center text-light"><h5>Total GWAS Diversity by Ancestry</h5></div>
                    <div class="card-body">
                      <div class="list-group">
                        <p style="font-size:12px; height: 30px;" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action list-group-item-danger">European Participants:
<span class="badge badge-primary badge-pill">88.03%</span>
                        </p>
                        <p style="font-size:12px; height: 30px;" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action list-group-item-primary">African Participants:
<span class="badge badge-primary badge-pill">0.51%</span>
                        </p>
                        <p style="font-size:12px; height: 30px;" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action list-group-item-success">African American/Caribean Participants:
<span class="badge badge-primary badge-pill">1.46%</span>
                        </p>
                        <p style="font-size:12px; height: 30px;" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action list-group-item-info">Other/Mixed Participants:
<span class="badge badge-primary badge-pill">0.93%</span>
                        </p>
                        <p style="font-size:12px; height: 30px;" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action list-group-item-secondary disabled">Asian Participants:
<span class="badge badge-primary badge-pill">7.86%</span>
                        </p>
                        <p style="font-size:12px; height: 30px;" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action list-group-item-warning">Hispanic/Latin American Participants:
<span class="badge badge-primary badge-pill">1.2%</span>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {{ embed(doc.roots[1]) }}
          </div>
          <div class="col-sm-5">
            {{ embed(doc.roots[2]) }}
            {{ embed(doc.roots[3]) }}
          </div>
          <div class="col-sm-4">
            {{ embed(doc.roots[4]) }}
            {{ embed(doc.roots[5]) }}
            <div class="col-sm-6">
              {{ embed(doc.roots[6]) }}
            </div>
            <div class="col-sm-6">
              {{ embed(doc.roots[7]) }}
            </div>
            <div class="col-sm-6 col-md-offset-3">
              {{ embed(doc.roots[8]) }}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="additionalinfo" class="tab-pane fade">
      <div class="container-fluid">
        <div class="row">
          <div class="column" style="background-color:#ffffff;">
            <h1>Summary Statistics</h1>
            <p>Here we present a range of summary statistics related to the data which powers the dashboard (and some which doesn't), updated when the Catalog is updated. Note that these summary statistics and the figures themselves only use raw (wrangled) data from the <a href="https://www.ebi.ac.uk/gwas/">Catalog</a>. Currently:</p>
            <ul>
<li> <p>There are a total of 4257 studies in the Catalog.</p></li>
<li> <p>Earliest study in catalogue was PubMedID 15761122 on 2005-03-10 by Klein RJ et al.</p></li>
<li> <p>Most recent study in the catalogue was PubMedID 31501611 on 2019-09-09 by Karlsson T et al.</p></li>
<li> <p>Accession with biggest sample is PubMedID 30643256 (N=2370390) by Baselmans BML et al.</p></li>
<li> <p>There are a total of 7796 unique study accessions.</p></li>
<li> <p>There are a total of 4703 unique diseases and traits studied.</p></li>
<li> <p>There are a total of 3127 unique EBI "Mapped Traits".</p></li>
<li> <p>The total number of associations found is 159202.</p></li>
<li> <p>The average number of associations found is 20.42.</p></li>
<li> <p>Mean P-Value for the strongest SNP risk allele is: 1.014E-6.</p></li>
<li> <p>The number of associations reaching the 5e-8 significance threshold: 103694.</p></li>
<li> <p>The journal to feature the most GWAS studies is: Nat Genet.</p></li>
<li> <p>Total number of different journals publishing GWAS is: 545.</p></li>
<li> <p>Most frequently studied (Non-European) disease or trait: Type 2 diabetes.</p></li>
              <p></p>
            </ul>
            <h1 align="left">Funding, Contact and Acknowledgements</h1>
            <p> <img src="https://github.com/crahal/gwasdiversitymonitor/blob/master/gwasdiversitymonitor_app/templates/fundinglogos/britishacademy.jpg?raw=true" width="180" align=left hspace="20" vspace="20">    <img src="https://github.com/crahal/gwasdiversitymonitor/blob/master/gwasdiversitymonitor_app/templates/fundinglogos/LECFlogo.jpg?raw=true" width="125" align=left hspace="30" vspace="20"> <img src="https://github.com/crahal/gwasdiversitymonitor/blob/master/gwasdiversitymonitor_app/templates/fundinglogos/erc_logo.jpeg?raw=true" width="125" align=left hspace="30" vspace="20">
            This work is generously supported by The British Academy (a Postdoctoral Fellowship: Charles Rahal), the European Research Council (grants 615603 and 835079: Melinda C. Mills), and will be maintained going forward by the Leverhulme Centre for Demographic Science. The academic homepages of the curators can be found <a href="https://crahal.github.io/">here</a> and <a href="https://www.melindacmills.com">here</a>. We are grateful to comments on the source code and infrastructure from <a href="https://github.com/ianknowles">Ian Knowles</a>, <a href="<a https://github.com/YiLiu6240">Yi Liu</a>, Molly Przeworski, <a href="<a https://github.com/YiLiu6240">Ben Domingue</a>, Sam Trejo and the <a href="http://www.sociogenome.org/">Sociogenome</a> group more generally. We look forward to responsively updating the GWAS Diversity Monitor with all of your suggestions, and in that vein would encourage any comments via email, <a href="https://twitter.com/oxforddemsci">Twitter</a> or <a href="https://github.com/crahal/GWASDiversityMonitor">GitHub</a>.</p>
          </div>
          <div class="column" style="background-color:#ffffff;">
            <h1>About</h1>
            <p> This interactive dashboard monitors the diversity of participants across all <it>published</it> Genome Wide Association Studies (GWAS), the primary technique used for genetic discovery. The objective is to identify statistical associations between a set of genetic variants across different individuals (Single Nucleotide Polymorphisms, or 'SNPs') with specific traits of interest. This monitor represents an extension of our earlier project, <a href="https://www.nature.com/articles/s42003-018-0261-x">'The Scientometrics of Genome Wide Association Studies'</a> published in <i>Communications Biology</i> in January 2019. As there, we leverage the magnificent dataset provided and curated by the <a href="https://www.ebi.ac.uk/gwas/">NHGRI-EBI Catalog</a> (subject to their licensing information which can be found <a href="https://www.ebi.ac.uk/about/terms-of-use">here</a>). The dashboard itself is written in <a href="http://www.google .com">Bokeh 1.2.0</a>, an interactive visualization library in Python which targets modern web browsers for presentation. The source code is hosted on <a href="https://github.com/crahal/GWASDiversityMonitor">GitHub</a>, and we are actively encouraging community-based suggestions and contributions. The backend code checks daily for updates to the GWAS Catalog, writing to logs and caching all new files and refreshing the dataset which powers the dashboard as appropriate. The dashboard itself is hosted on <a href="https://www.heroku.com">Heroku</a> (a PaaS). The dashboard is under constant development and review, but is currently comprised of five widgets: 'Evaluation Metric' (whether the data is aggregated based on the number of studies or percent of participants), <a href="https://github.com/crahal/gwasdiversitymonitor/blob/master/data/support/dict_replacer_broad.tsv">'Broader Ancestry'</a> (grouped into one of six major ancestral categories), <a href="https://www.ebi.ac.uk/gwas/api/search/downloads/trait_mappings">'Parent Term'</a> (grouped into 17 main EFO categories such as 'Digestive System Disease' or 'Cancer'), 'Research Stage' (whether the study concerns initial genetic discovery or replicating those discoveries), 'Year' (related to year of study). Due to the relatively small size of the dataset, not all widgets apply to each figure, and we describe our design choices below:</p>
            <ul>
              <li> <p><b> Figure 1: Ancestry over time by Parent Term (Bubble Plot).</b> This provides a granular overview of all GWAS in the Catalog. It maps onto EFO Parent terms, and splits on commas. If a GWAS examines multiple Parent terms, both are included (i.e., we split on commas in a string such as 'Body Measurement, Cancer' and include both). Applicable widgets are: 'Year', 'Broader Term', 'Parent Term' and 'Research Stage'.</p></li>
              <li> <p><b> Figure 2: Research Stage across all EFO Parent Categories by Ancestry (Time Series Plot).</b> This figure displays changes in how 'Broader Ancestry' has changed over time across the two 'Evaluation Metric' widgets. Note: due to the fact that that lesser studied ancestries are rarely used to study specific parent terms, we do not utilize the 'Parent Term' widget here. Fig 2a represents results when we drop all Catalog rows containing data in part not recorded, and Fig 2b includes them.</p></li>
              <li> <p><b> Figure 3: : Participants by Parent Term and Research Stage (Doughnut Chart).</b> This figure displays the percent of which 'Broader Ancestry' is used to study which 'Parent Term' across the two definitions of the 'Evaluation Metric'.</p></li>
              <li> <p><b> Figure 4: Choropleth Map. </b> Due to the sparsity of countries recruited from across all EFO Parent terms, this figure draws from two widgets: the 'Evaluation Metric' and the 'Year' slider which determines year of recruitment. This is also partially due to the lack of clarity in the free-text of academic articles which are catalogued by the NHGRI-EBI.</p></li>
              <li> <p><b> Figure 5: Free text Ancestry definition by Parent Term and Research Stage (Horizontal Bar Plot).</b> This figure extracts ancestral terms from the free text description of a study provided by the Catalog using a regex function as per our <a href="https://www.nature.com/articles/s42003-018-0261-x">scientometric review</a>. Applicable widgets are: 'Parent Term', 'Research Stage' and 'Year'.</p></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
{% endblock %}
